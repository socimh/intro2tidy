{
  "hash": "8f53edf4b0fea174e8f0e2b2225019d3",
  "result": {
    "markdown": "---\ntheme: united\nlang: zh\ntoc: true\ntoc-depth: 3\ntoc-expand: 2\ntoc-title: 本页目录\nnumber-sections: true\n---\n\n\n\n# dplyr 合并\n\n-   上下合并\n    -   `bind_rows()` 根据位置垂直拼接\n-   左右合并\n    -   `bind_cols()` 根据位置水平拼接\n    -   `left_join()` 根据ID变量匹配，同时只保留[**前一个数据**]{style=\"color:darkred\"}的个案\n    -   `right_join()` 根据ID变量匹配，同时只保留[**后一个数据**]{style=\"color:darkred\"}的个案\n    -   `full_join()` 根据ID变量匹配，同时保留前后数据的[**所有**]{style=\"color:darkred\"}个案\n    -   `inner_join()` 根据ID变量匹配，同时保留前后数据的[**共同**]{style=\"color:darkred\"}个案\n-   假装合并，实为筛选（删除）\n    -   `semi_join()` 根据ID变量匹配，[**筛选**]{style=\"color:darkred\"}前一个数据中，和后一个数据的[**共同**]{style=\"color:darkred\"}个案\n    -   `anti_join()` 根据ID变量匹配，[**删除**]{style=\"color:darkred\"}前一个数据中，和后一个数据的[**共同**]{style=\"color:darkred\"}个案\n\n## `bind_rows()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nlibrary(tidyverse)\n\ntb <- starwars %>%\n  select(1:5) %>%\n  slice(1:6)\n\ntb1 <- tb %>%\n  slice(1:3)\n\ntb2 <- tb %>%\n  slice(4:6)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntb1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 x 5\n  name           height  mass hair_color skin_color \n  <chr>           <int> <dbl> <chr>      <chr>      \n1 Luke Skywalker    172    77 blond      fair       \n2 C-3PO             167    75 <NA>       gold       \n3 R2-D2              96    32 <NA>       white, blue\n```\n:::\n\n```{.r .cell-code}\ntb2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 x 5\n  name        height  mass hair_color  skin_color\n  <chr>        <int> <dbl> <chr>       <chr>     \n1 Darth Vader    202   136 none        white     \n2 Leia Organa    150    49 brown       light     \n3 Owen Lars      178   120 brown, grey light     \n```\n:::\n\n```{.r .cell-code}\nbind_rows(tb1, tb2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 5\n  name           height  mass hair_color  skin_color \n  <chr>           <int> <dbl> <chr>       <chr>      \n1 Luke Skywalker    172    77 blond       fair       \n2 C-3PO             167    75 <NA>        gold       \n3 R2-D2              96    32 <NA>        white, blue\n4 Darth Vader       202   136 none        white      \n5 Leia Organa       150    49 brown       light      \n6 Owen Lars         178   120 brown, grey light      \n```\n:::\n:::\n\n\n\n## `bind_cols()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\ntb1 <- tb %>%\n  select(1:3)\ntb2 <- tb %>%\n  select(4:5)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntb1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 3\n  name           height  mass\n  <chr>           <int> <dbl>\n1 Luke Skywalker    172    77\n2 C-3PO             167    75\n3 R2-D2              96    32\n4 Darth Vader       202   136\n5 Leia Organa       150    49\n6 Owen Lars         178   120\n```\n:::\n\n```{.r .cell-code}\ntb2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 2\n  hair_color  skin_color \n  <chr>       <chr>      \n1 blond       fair       \n2 <NA>        gold       \n3 <NA>        white, blue\n4 none        white      \n5 brown       light      \n6 brown, grey light      \n```\n:::\n\n```{.r .cell-code}\nbind_cols(tb1, tb2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 5\n  name           height  mass hair_color  skin_color \n  <chr>           <int> <dbl> <chr>       <chr>      \n1 Luke Skywalker    172    77 blond       fair       \n2 C-3PO             167    75 <NA>        gold       \n3 R2-D2              96    32 <NA>        white, blue\n4 Darth Vader       202   136 none        white      \n5 Leia Organa       150    49 brown       light      \n6 Owen Lars         178   120 brown, grey light      \n```\n:::\n:::\n\n\n\n## `left_join()`\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ntb1 %>%\n  left_join(tb2)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in `left_join()`:\n! `by` must be supplied when `x` and `y` have no common variables.\ni Use `cross_join()` to perform a cross-join.\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntb2 <- tb %>%\n  select(c(1, 4:5))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\ntb1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 3\n  name           height  mass\n  <chr>           <int> <dbl>\n1 Luke Skywalker    172    77\n2 C-3PO             167    75\n3 R2-D2              96    32\n4 Darth Vader       202   136\n5 Leia Organa       150    49\n6 Owen Lars         178   120\n```\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\ntb2\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 3\n  name           hair_color  skin_color \n  <chr>          <chr>       <chr>      \n1 Luke Skywalker blond       fair       \n2 C-3PO          <NA>        gold       \n3 R2-D2          <NA>        white, blue\n4 Darth Vader    none        white      \n5 Leia Organa    brown       light      \n6 Owen Lars      brown, grey light      \n```\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\ntb1 %>%\n  left_join(tb2)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nJoining with `by = join_by(name)`\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 5\n  name           height  mass hair_color  skin_color \n  <chr>           <int> <dbl> <chr>       <chr>      \n1 Luke Skywalker    172    77 blond       fair       \n2 C-3PO             167    75 <NA>        gold       \n3 R2-D2              96    32 <NA>        white, blue\n4 Darth Vader       202   136 none        white      \n5 Leia Organa       150    49 brown       light      \n6 Owen Lars         178   120 brown, grey light      \n```\n:::\n\n```{.r .cell-code  code-fold=\"false\"}\ntb1 %>%\n  left_join(tb2, by = \"name\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 5\n  name           height  mass hair_color  skin_color \n  <chr>           <int> <dbl> <chr>       <chr>      \n1 Luke Skywalker    172    77 blond       fair       \n2 C-3PO             167    75 <NA>        gold       \n3 R2-D2              96    32 <NA>        white, blue\n4 Darth Vader       202   136 none        white      \n5 Leia Organa       150    49 brown       light      \n6 Owen Lars         178   120 brown, grey light      \n```\n:::\n:::",
    "supporting": [
      "dplyr-join_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{},\"value\":[]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}